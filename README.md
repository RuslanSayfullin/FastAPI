##### _—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ Sayfullin R.R.

–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –∞–∫—Ç—É–∞–ª—å–Ω–∞ –¥–ª—è Linux-—Å–∏—Å—Ç–µ–º.
========================================================================================================================
–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:
    python = "^3.11.11"
    fastapi = "^0.115.12"
    PostgreSQL

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:
$ git clone https://github.com/RuslanSayfullin/FastAPI.git
–ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –æ—Å–Ω–æ–≤–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã: 
$ cd FastAPI

========================================================================================================================
–°–æ–∑–¥–∞—Ç—å –∏ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ: 
    $ python3 -m venv venv 
    $ source venv/bin/activate 
–£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏–∑ —Ñ–∞–π–ª–∞ requirements.txt:
    (venv) $ pip install -r requirements.txt

C–æ–∑–¥–∞–Ω–∏—è —Ñ–∞–π–ª–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π—Å –ø–æ–º–æ—â—å—é –∫–æ–º–∞–Ω–¥—ã:
    $ pip freeze > requirements.txt

Open the inreactive documentation: http://localhost:8000/docs

# –ò—Å—Ç–æ—á–Ω–∏–∫
========================================================================================================================
https://github.com/PacktPublishing/Building-Data-Science-Applications-with-FastAPI-Second-Edition

Building Data Science Applications with FastAPI.
================================================
Part 1: Introduction to Python and FastAPI
    1. Python Development Environment Setup
    2. Python Programming Specificities
    3. Developing a RESTful API with FastAPI
    4. Managing Pydantic Data Models in FastAPI
    5. Dependency Injection in FastAPI
Part 2: Building and Deploying a Complete Web Backend with FastAPI
    6. Databases and Asynchronous ORMs
    7. Managing Authentication and Security in FastAPI
    8. Defining WebSockets for Two-Way Interactive Communication in FastAPI
    9. Testing an API Asynchronously with pytest and HTTPX
    10. Deploying a FastAPI Project
Part 3: Building Resilient and Distributed Data Science Systems with FastAPI
    11. Introduction to Data Science in Python
    12. Creating an Efficient Prediction API Endpoint with FastAPI
    13. Implementing a Real-Time Object Detection System Using WebSockets with FastAPI
    14. Creating a Distributed Text-to-Image AI System Using the Stable Diffusion Model
    15. Monitoring the Health and Performance of a Data Science System



#####
–ö–ª–∞—Å—Å Header –≤ FastAPI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –∑–∞–ø—Ä–æ—Å–∞ –∏ –ø–µ—Ä–µ–¥–∞—á–∏ –∏—Ö –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞.

–û—Å–Ω–æ–≤–Ω–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ Header:
    1. –î–æ—Å—Ç—É–ø –∫ –∑–∞–≥–æ–ª–æ–≤–∫–∞–º –∑–∞–ø—Ä–æ—Å–∞
    - –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–æ–≤, —Ç–∞–∫–∏—Ö –∫–∞–∫:
        * User-Agent
        * Authorization (—Ç–æ–∫–µ–Ω—ã, API-–∫–ª—é—á–∏)
        * Content-Type
        * –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, X-Request-ID)
    2. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
    - FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–∞—Ä—Å–∏—Ç –∑–Ω–∞—á–µ–Ω–∏—è –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ç–∏–ø (–Ω–∞–ø—Ä–∏–º–µ—Ä, str, int, bool).
    3. –£–∫–∞–∑–∞–Ω–∏–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –∏–º–µ–Ω –∏ –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    - –ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å:
        * alias (–µ—Å–ª–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –Ω–∞–∑—ã–≤–∞–µ—Ç—Å—è –Ω–µ —Ç–∞–∫, –∫–∞–∫ –ø–∞—Ä–∞–º–µ—Ç—Ä —Ñ—É–Ω–∫—Ü–∏–∏),
        * default (–∑–Ω–∞—á–µ–Ω–∏–µ, –µ—Å–ª–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç).

–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
1. –ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≥–æ–ª–æ–≤–∫–∞ User-Agent:

    from fastapi import FastAPI, Header
    app = FastAPI()

    @app.get("/user-agent/")
    async def get_user_agent(user_agent: str = Header(...)):
        return {"User-Agent": user_agent}

    –ó–¥–µ—Å—å Header(...) –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω. –ï—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç ‚Äî FastAPI –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É 422.

2. –ö–∞—Å—Ç–æ–º–Ω—ã–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º –∑–Ω–∞—á–µ–Ω–∏–µ–º:
    
    from fastapi import FastAPI, Header
    app = FastAPI()

    @app.get("/items/")
    async def read_items(x_token: str = Header(default="secret-token")):
        return {"X-Token": x_token}
    
    –ï—Å–ª–∏ –∫–ª–∏–µ–Ω—Ç –Ω–µ –ø–µ—Ä–µ–¥–∞—Å—Ç X-Token, –±—É–¥–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ "secret-token".

3. –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å –¥—Ä—É–≥–∏–º –∏–º–µ–Ω–µ–º (–∞–ª–∏–∞—Å):

    from fastapi import FastAPI, Header
    app = FastAPI()

    @app.get("/secure/")
    async def secure_endpoint(api_key: str = Header(..., alias="X-API-Key")):
        return {"API-Key": api_key}

    FastAPI –±—É–¥–µ—Ç –∏—Å–∫–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–æ–∫ X-API-Key, –Ω–æ –≤ —Ñ—É–Ω–∫—Ü–∏–∏ –æ–Ω –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –∫–∞–∫ api_key.

–í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã:
–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —Ç–∏–ø–æ–≤:
    FastAPI –ø—ã—Ç–∞–µ—Ç—Å—è –∫–æ–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞–≥–æ–ª–æ–≤–∫–∏ –≤ —É–∫–∞–∑–∞–Ω–Ω—ã–π —Ç–∏–ø. 
    –ù–∞–ø—Ä–∏–º–µ—Ä: 
        is_admin: bool = Header(False)  # "true" ‚Üí True, "1" ‚Üí True, etc.
–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏:
    –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Accept-Encoding) –º–æ–≥—É—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–µ—Ñ–∏—Å—ã (-), –ø–æ—ç—Ç–æ–º—É –≤ Python –∏—Ö –Ω—É–∂–Ω–æ —É–∫–∞–∑—ã–≤–∞—Ç—å —Å –ø–æ–¥—á–µ—Ä–∫–∏–≤–∞–Ω–∏–µ–º (_), –∞ FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–æ–≤–µ–¥–µ—Ç –º–∞–ø–ø–∏–Ω–≥:
        accept_encoding: str = Header(...)  # –°—Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è "Accept-Encoding"
–ù–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤:
    –ï—Å–ª–∏ –∑–∞–≥–æ–ª–æ–≤–æ–∫ –º–æ–∂–µ—Ç –ø—Ä–∏–π—Ç–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑ (–Ω–∞–ø—Ä–∏–º–µ—Ä, Set-Cookie), —É–∫–∞–∂–∏—Ç–µ list:
        cookies: list[str] = Header([])

Header ‚Äî —ç—Ç–æ —É–¥–æ–±–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç FastAPI –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å HTTP-–∑–∞–≥–æ–ª–æ–≤–∫–∞–º–∏, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—é—â–∏–π –≤–∞–ª–∏–¥–∞—Ü–∏—é, –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—é —Ç–∏–ø–æ–≤ –∏ –≥–∏–±–∫–æ—Å—Ç—å –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ.
#####


–ö–ª–∞—Å—Å Depends –≤ FastAPI ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≤–Ω–µ–¥—Ä–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (Dependency Injection). 
–û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç:
    - –í—ã–Ω–æ—Å–∏—Ç—å –ø–æ–≤—Ç–æ—Ä—è—é—â—É—é—Å—è –ª–æ–≥–∏–∫—É (–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é, –ø—Ä–æ–≤–µ—Ä–∫–∏, –¥–æ—Å—Ç—É–ø –∫ –ë–î) –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏/–∫–ª–∞—Å—Å—ã.
    - –£–ø—Ä–æ—â–∞—Ç—å —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ª–µ–≥–∫–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å –Ω–∞ –º–æ–∫–∏).
    - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–∑—ã–≤–∞—Ç—å –∫–æ–¥ –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∑–∞–ø—Ä–æ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–æ–∫–µ–Ω –∏–ª–∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞).

–û—Å–Ω–æ–≤–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Depends:
1. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞. –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ –≤ –∫–∞–∂–¥–æ–º —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ, –≤—ã–Ω–æ—Å–∏–º –µ–≥–æ –≤ –æ—Ç–¥–µ–ª—å–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é –∏ –≤–Ω–µ–¥—Ä—è–µ–º —á–µ—Ä–µ–∑ Depends.
    –ü—Ä–∏–º–µ—Ä: 
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ API-–∫–ª—é—á–∞. –ó–¥–µ—Å—å verify_api_key –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º protected_route. –ï—Å–ª–∏ –∫–ª—é—á –Ω–µ–≤–µ—Ä–Ω—ã–π ‚Äî –∑–∞–ø—Ä–æ—Å –ø—Ä–µ—Ä–≤–µ—Ç—Å—è —Å –æ—à–∏–±–∫–æ–π 403.
    from fastapi import FastAPI, Depends, HTTPException, Header

    app = FastAPI()

    def verify_api_key(api_key: str = Header(...)):
        if api_key != "secret-key":
            raise HTTPException(status_code=403, detail="Invalid API Key")
        return api_key

    @app.get("/protected/")
    async def protected_route(api_key: str = Depends(verify_api_key)):
        return {"message": "Access granted"}
    
2. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–≥—É—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∞—Ä–≥—É–º–µ–Ω—Ç—ã –∏–∑ –ø—É—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞, query-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏ —Ç.–¥.
    –ü—Ä–∏–º–µ—Ä: 
    
    # –ü–æ–ª—É—á–µ–Ω–∏–µ –æ–±—ä–µ–∫—Ç–∞ –∏–∑ –ë–î –ø–æ ID. FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–¥–∞—Å—Ç item_id –∏–∑ –ø—É—Ç–∏ –≤ get_item.
    from fastapi import FastAPI, Depends

    app = FastAPI()

    async def get_item(item_id: int):
        #–∑–∞–ø—Ä–æ—Å –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        return {"id": item_id, "name": "Sample Item"}

    @app.get("/items/{item_id}")
    async def read_item(item: dict = Depends(get_item)):
        return item

3. –ú–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏. –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–≥—É—Ç –∑–∞–≤–∏—Å–µ—Ç—å –æ—Ç –¥—Ä—É–≥–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (–∫–∞–∫ –º–∞—Ç—Ä–µ—à–∫–∞).
    –ü—Ä–∏–º–µ—Ä: 
    
    # –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è + –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤
    from fastapi import FastAPI, Depends, Header, HTTPException

    app = FastAPI()

    def get_current_user(token: str = Header(...)):
    return {"user": "admin", "token": token}  # –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç—É—Ç —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ JWT

    def check_admin(user: dict = Depends(get_current_user)):
        if user["user"] != "admin":
            raise HTTPException(status_code=403, detail="Admins only")
        return user

    @app.get("/admin/")
    async def admin_panel(user: dict = Depends(check_admin)):
        return {"message": "Welcome, admin!"}

    # –°–Ω–∞—á–∞–ª–∞ –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è get_current_user (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–∫–µ–Ω).
    # –ó–∞—Ç–µ–º check_admin (–ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è).
    # –ò —Ç–æ–ª—å–∫–æ –ø–æ—Ç–æ–º ‚Äî –æ—Å–Ω–æ–≤–Ω–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç admin_panel.

4. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–ª–∞—Å—Å–æ–≤ –∫–∞–∫ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π. Depends —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ —Ç–æ–ª—å–∫–æ —Å —Ñ—É–Ω–∫—Ü–∏—è–º–∏, –Ω–æ –∏ —Å –∫–ª–∞—Å—Å–∞–º–∏ (—É–¥–æ–±–Ω–æ –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π).
    –ü—Ä–∏–º–µ—Ä: 
    
    # –ö–ª–∞—Å—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î
    from fastapi import FastAPI, Depends, Header, HTTPException

    app = FastAPI()

    class Database:
        def __init__(self, url: str = "sqlite:///db.sqlite"):
            self.url = url

        def get_data(self):
            return {"data": "from database"}

    def get_db():
        return Database()  # –í —Ä–µ–∞–ª—å–Ω–æ—Å—Ç–∏ —Ç—É—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î

    @app.get("/data/")
    async def fetch_data(db: Database = Depends(get_db)):
        return db.get_data()

5. –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è —Ä–æ—É—Ç–µ—Ä–∞ –∏–ª–∏ –≤—Å–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –¥–ª—è –≥—Ä—É–ø–ø—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ –∏–ª–∏ –≤—Å–µ–≥–æ FastAPI-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.
    –ü—Ä–∏–º–µ—Ä: 
    
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ API-–∫–ª—é—á–∞ –¥–ª—è –≤—Å–µ—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
    from fastapi import FastAPI, Depends

    app = FastAPI(dependencies=[Depends(verify_api_key)])

    @app.get("/hello/")
    async def hello():
        return {"message": "Hello"}  # –ë—É–¥–µ—Ç —Ç—Ä–µ–±–æ–≤–∞—Ç—å API-–∫–ª—é—á

–ö–ª—é—á–µ–≤—ã–µ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Depends
‚úÖ –ß–∏—Å—Ç—ã–π –∫–æ–¥ ‚Äî –ª–æ–≥–∏–∫–∞ —Ä–∞–∑–¥–µ–ª–µ–Ω–∞ –Ω–∞ –º–æ–¥—É–ª–∏.
‚úÖ –ì–∏–±–∫–æ—Å—Ç—å ‚Äî –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞—Ç—å.
‚úÖ –¢–µ—Å—Ç–∏—Ä—É–µ–º–æ—Å—Ç—å ‚Äî –≤ —Ç–µ—Å—Ç–∞—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –ª–µ–≥–∫–æ –ø–æ–¥–º–µ–Ω–∏—Ç—å.
‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è ‚Äî FastAPI —Å–∞–º –≤—ã–∑—ã–≤–∞–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –Ω—É–∂–Ω—ã–π –º–æ–º–µ–Ω—Ç.

–í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã
–ü–æ—Ä—è–¥–æ–∫ –≤—ã–∑–æ–≤–∞: –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è –≤ –ø–æ—Ä—è–¥–∫–µ –∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏—è.
–ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ: –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∫–µ—à–∏—Ä—É–µ—Ç—Å—è –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞ (–µ—Å–ª–∏ –Ω–µ –Ω—É–∂–µ–Ω –∫–µ—à, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ use_cache=False –≤ Depends).
–û—à–∏–±–∫–∏: –ï—Å–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –≤—ã–∑—ã–≤–∞–µ—Ç HTTPException, –∑–∞–ø—Ä–æ—Å –ø—Ä–µ—Ä—ã–≤–∞–µ—Ç—Å—è.

–ò—Ç–æ–≥
Depends ‚Äî —ç—Ç–æ "–º–∞–≥–∏—á–µ—Å–∫–∏–π" –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç FastAPI –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —á–∏—Å—Ç–æ–π, –º–æ–¥—É–ª—å–Ω–æ–π –∏ –ª–µ–≥–∫–æ —Ç–µ—Å—Ç–∏—Ä—É–µ–º–æ–π –ª–æ–≥–∏–∫–∏. –û–Ω –æ—Å–æ–±–µ–Ω–Ω–æ –ø–æ–ª–µ–∑–µ–Ω –¥–ª—è:
- –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (JWT, OAuth2).
- –î–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–∞–º –¥–∞–Ω–Ω—ã—Ö.
-  –í–∞–ª–∏–¥–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –∏ —Ç—Ä–µ–π—Å–∏–Ω–≥–∞ –∑–∞–ø—Ä–æ—Å–æ–≤.
#####


–ö–ª–∞—Å—Å Query –≤ FastAPI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ (–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ URL, –∫–æ—Ç–æ—Ä—ã–µ –∏–¥—É—Ç –ø–æ—Å–ª–µ ?). 
–û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç:
    - –ò–∑–≤–ª–µ–∫–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è query-–ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ –∑–∞–ø—Ä–æ—Å–∞.

    - –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∏—Ö (–ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–∏–ø, –¥–ª–∏–Ω—É, –¥–∏–∞–ø–∞–∑–æ–Ω –∏ —Ç.–¥.).

    - –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é, –æ–ø–∏—Å–∞–Ω–∏—è –∏ –ø—Ä–∏–º–µ—Ä—ã –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ API.

–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ Query:


1. –ü—Ä–æ—Å—Ç–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞.
    # –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –ø—Ä–æ–≤–µ—Ä–æ–∫
    from fastapi import FastAPI, Query

    app = FastAPI()

    @app.get("/items/")
    async def read_items(q: str = Query(...)):  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
        return {"q": q}

    # –ó–∞–ø—Ä–æ—Å: /items/?q=hello ‚Üí –û—Ç–≤–µ—Ç: {"q": "hello"}.
    # –ï—Å–ª–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä q –Ω–µ –ø–µ—Ä–µ–¥–∞–Ω ‚Äî FastAPI –≤–µ—Ä–Ω–µ—Ç –æ—à–∏–±–∫—É 422 (Unprocessable Entity).

2. –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    from fastapi import FastAPI, Query

    app = FastAPI()

    @app.get("/items/")
    async def read_items(q: str = Query(None)):  # –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
        return {"q": q}

    # –ó–∞–ø—Ä–æ—Å: /items/ ‚Üí –û—Ç–≤–µ—Ç: {"q": null}.
    # –ó–∞–ø—Ä–æ—Å: /items/?q=test ‚Üí –û—Ç–≤–µ—Ç: {"q": "test"}.
    # –ú–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å —Å–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: (q: str = Query("default_value"))

3. –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–ª–∏–Ω—ã —Å—Ç—Ä–æ–∫–∏
    from fastapi import FastAPI, Query

    app = FastAPI()

    @app.get("/items/")
    async def read_items(q: str = Query(..., min_length=3, max_length=10)):
        return {"q": q}

    #   /?q=ab ‚Üí –û—à–∏–±–∫–∞: –¥–ª–∏–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å ‚â• 3.
    #   /?q=abcdefghijk ‚Üí –û—à–∏–±–∫–∞: –¥–ª–∏–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å ‚â§ 10.
    # –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è: (q: str = Query(..., regex="^[a-z]+$"))  # –¢–æ–ª—å–∫–æ –ª–∞—Ç–∏–Ω—Å–∫–∏–µ –±—É–∫–≤—ã –≤ –Ω–∏–∂–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ
    # –ß–∏—Å–ª–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (min/max): (price: float = Query(..., gt=0, lt=1000))  # –ß–∏—Å–ª–æ –æ—Ç 0 –¥–æ 1000

4. –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è (—Å–ø–∏—Å–∫–∏)
    # –ü–æ–ª—É—á–∏—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, /items/?q=foo&q=bar)
    from fastapi import FastAPI, Query

    app = FastAPI()

    @app.get("/items/")
    async def read_items(q: list[str] = Query(...)):
        return {"q": q}

    # –ó–∞–ø—Ä–æ—Å: /items/?q=foo&q=bar ‚Üí –û—Ç–≤–µ—Ç: {"q": ["foo", "bar"]}.

5. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏—è, –ø—Ä–∏–º–µ—Ä–æ–≤ –∏ deprecated-—Ñ–ª–∞–≥–æ–≤
    from fastapi import FastAPI, Query

    app = FastAPI()

    @app.get("/items/")
    async def read_items(
        q: str = Query(
            None,
            title="Search Query",
            description="Filter items by keyword",
            example="apple",
            deprecated=True
        )
    ):
        return {"q": q}
    

    # –≠—Ç–æ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –≤ Swagger –∏ Redoc:
    # –ü–æ–¥—Å–∫–∞–∑–∫–∞ —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º.
    # –ü—Ä–∏–º–µ—Ä –∑–Ω–∞—á–µ–Ω–∏—è.
    # –ü–æ–º–µ—Ç–∫–∞, —á—Ç–æ –ø–∞—Ä–∞–º–µ—Ç—Ä —É—Å—Ç–∞—Ä–µ–ª.

6. –ê–ª–∏–∞—Å—ã (–¥—Ä—É–≥–æ–µ –∏–º—è –ø–∞—Ä–∞–º–µ—Ç—Ä–∞)
    # –ï—Å–ª–∏ query-–ø–∞—Ä–∞–º–µ—Ç—Ä –¥–æ–ª–∂–µ–Ω –Ω–∞–∑—ã–≤–∞—Ç—å—Å—è –Ω–µ —Ç–∞–∫, –∫–∞–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω–∞—è –≤ Python
    from fastapi import FastAPI, Query

    app = FastAPI()

    @app.get("/items/")
    async def read_items(search: str = Query(..., alias="q")):
        return {"search": search}
    
    # –ó–∞–ø—Ä–æ—Å: /items/?q=hello ‚Üí –í —Ñ—É–Ω–∫—Ü–∏—é –ø–æ–ø–∞–¥–µ—Ç search="hello".

–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Query?
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ/–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ URL.
- –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö (—Å—Ç—Ä–æ–∫–∏, —á–∏—Å–ª–∞, —Å–ø–∏—Å–∫–∏).
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API (–æ–ø–∏—Å–∞–Ω–∏—è, –ø—Ä–∏–º–µ—Ä—ã).
- –°–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ (–∞–ª–∏–∞—Å—ã).

–í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã
–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Path –∏ Body:
    Query —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å query-–ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏. –î–ª—è —á–∞—Å—Ç–µ–π URL –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Path, –¥–ª—è —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞ ‚Äî Body.
–ó–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é:
    Query(None) ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π.
    Query(...) ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π (–∞–Ω–∞–ª–æ–≥ Required).
Deprecated-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
    –ü–æ–º–µ—Ç–∫–∞ deprecated=True –Ω–µ –≤–ª–∏—è–µ—Ç –Ω–∞ –ª–æ–≥–∏–∫—É, –Ω–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞–µ—Ç –∫–ª–∏–µ–Ω—Ç–æ–≤ API –æ–± —É—Å—Ç–∞—Ä–µ–≤–∞–Ω–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞.

–ò—Ç–æ–≥:
Query ‚Äî —ç—Ç–æ –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω—ã–π —Å–ø–æ—Å–æ–±:
‚úÖ –ò–∑–≤–ª–µ–∫–∞—Ç—å query-–ø–∞—Ä–∞–º–µ—Ç—Ä—ã.
‚úÖ –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –∏—Ö.
‚úÖ –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å API.
‚úÖ –ì–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–∞–ª–∏–∞—Å—ã, deprecated, –ø—Ä–∏–º–µ—Ä—ã).

–ë–µ–∑ Query –ø—Ä–∏—à–ª–æ—Å—å –±—ã –≤—Ä—É—á–Ω—É—é –ø–∞—Ä—Å–∏—Ç—å –∏ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ URL, —á—Ç–æ —É—Å–ª–æ–∂–Ω–∏–ª–æ –±—ã –∫–æ–¥.
#####


–ö–ª–∞—Å—Å Path –≤ FastAPI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏ –ø—É—Ç–∏ (path parameters) ‚Äî –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–º–∏ —á–∞—Å—Ç—è–º–∏ URL, 
–∫–æ—Ç–æ—Ä—ã–µ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è –∏–∑ —Å–∞–º–æ–≥–æ –ø—É—Ç–∏ –∑–∞–ø—Ä–æ—Å–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, items/42, –≥–¥–µ 42 ‚Äî —ç—Ç–æ ID —ç–ª–µ–º–µ–Ω—Ç–∞). 
–û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Ç–µ –∂–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏, —á—Ç–æ –∏ Query, –Ω–æ –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –∏–º–µ–Ω–Ω–æ –Ω–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏.

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Path:
1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏–π –∏–∑ URL:
    # –ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–∫–ª–∞—Ä–∞—Ç–∏–≤–Ω–æ –ø–æ–ª—É—á–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–∑ –ø—É—Ç–∏ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤—ã–≤–∞—Ç—å –∏—Ö –≤ –Ω—É–∂–Ω—ã–π —Ç–∏–ø (–Ω–∞–ø—Ä–∏–º–µ—Ä, int, str, UUID).
    from fastapi import FastAPI, Path

    app = FastAPI()

    @app.get("/items/{item_id}")
    async def read_item(item_id: int = Path(...)):  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –ø–∞—Ä–∞–º–µ—Ç—Ä
        return {"item_id": item_id}

    # –ó–∞–ø—Ä–æ—Å GET /items/42 ‚Üí {"item_id": 42}.
    # –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å –Ω–µ —á–∏—Å–ª–æ (–Ω–∞–ø—Ä–∏–º–µ—Ä, items/foo), FastAPI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–µ—Ä–Ω—ë—Ç –æ—à–∏–±–∫—É 422 (Unprocessable Entity).

2. –ú–æ–∂–Ω–æ –∑–∞–¥–∞–≤–∞—Ç—å –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è –¥–ª—è –∑–Ω–∞—á–µ–Ω–∏–π:
    - –ß–∏—Å–ª–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: gt (–±–æ–ª—å—à–µ), ge (–±–æ–ª—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ), lt (–º–µ–Ω—å—à–µ), le (–º–µ–Ω—å—à–µ –∏–ª–∏ —Ä–∞–≤–Ω–æ).
    - –°—Ç—Ä–æ–∫–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã: min_length, max_length, regex.

    # –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤. 
    from fastapi import FastAPI, Path

    app = FastAPI()

    @app.get("/items/{item_id}")
    async def read_item(
        item_id: int = Path(..., gt=0, title="Item ID", description="Must be positive"),  # –¢–æ–ª—å–∫–æ –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ —á–∏—Å–ª–∞
        name: str = Path(..., min_length=3, max_length=50)  # –°—Ç—Ä–æ–∫–∞ –æ—Ç 3 –¥–æ 50 —Å–∏–º–≤–æ–ª–æ–≤
    ):
        return {"item_id": item_id, "name": name}
    
    # GET /items/-5 ‚Üí –û—à–∏–±–∫–∞: item_id –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > 0.
    # GET /items/42?name=ab ‚Üí –û—à–∏–±–∫–∞: name –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –¥–ª–∏–Ω–Ω–µ–µ 3 —Å–∏–º–≤–æ–ª–æ–≤.

3. –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏:
    # –ö–∞–∫ –∏ –≤ Query, –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–ª—è—Ç—å –æ–ø–∏—Å–∞–Ω–∏–µ, –ø—Ä–∏–º–µ—Ä—ã –∏ –ø–æ–º–µ—Ç–∫–∏ –¥–ª—è Swagger/Redoc
    from fastapi import FastAPI, Path

    app = FastAPI()

    @app.get("/users/{user_id}")
    async def get_user(
        user_id: int = Path(
            ...,
            title="User ID",
            description="Unique identifier for the user",
            example=123,
        )
    ):
        return {"user_id": user_id}

4. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏:
    # –•–æ—Ç—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏ –æ–±—ã—á–Ω–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ, –º–æ–∂–Ω–æ –∑–∞–¥–∞—Ç—å –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (—Ä–µ–¥–∫–∏–π —Å–ª—É—á–∞–π, –Ω–æ –≤–æ–∑–º–æ–∂–Ω–æ)
    from fastapi import FastAPI, Path

    app = FastAPI()

    app.get("/items/{item_id}")
    async def read_item(item_id: int = Path(default=1)):  # –ï—Å–ª–∏ –Ω–µ –ø–µ—Ä–µ–¥–∞—Ç—å, –±—É–¥–µ—Ç 1
        return {"item_id": item_id}

    # –ù–æ —á–∞—â–µ Path(...) –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.


–ö–ª—é—á–µ–≤—ã–µ –æ—Ç–ª–∏—á–∏—è Path –æ—Ç Query
Path	                                            Query
–î–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ URL-–ø—É—Ç–∏ (/items/{item_id}).	    –î–ª—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ URL-—Å—Ç—Ä–æ–∫–µ (/items?name=foo).
–ü–æ—á—Ç–∏ –≤—Å–µ–≥–¥–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π.	                        –ú–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–º –∏–ª–∏ –Ω–µ—Ç.
–í–∞–ª–∏–¥–∞—Ü–∏—è: gt, ge, lt, le (–¥–ª—è —á–∏—Å–µ–ª).	            –í–∞–ª–∏–¥–∞—Ü–∏—è: min_length, regex (–¥–ª—è —Å—Ç—Ä–æ–∫).
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è, –∫–æ–≥–¥–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä ‚Äî —á–∞—Å—Ç—å –ø—É—Ç–∏.	        –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏, —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏ –∏ —Ç.–¥.


–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
    from fastapi import FastAPI, Path

    app = FastAPI()

    # –°–ª–æ–∂–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è —á–∏—Å–ª–∞
    @app.get("/products/{product_id}")
    async def get_product(
        product_id: int = Path(..., gt=1000, le=9999),  # –î–æ–ø—É—Å—Ç–∏–º, ID —Ç–æ–≤–∞—Ä–∞ –æ—Ç 1001 –¥–æ 9999
    ):
        return {"product_id": product_id}

        # GET /products/500 ‚Üí –û—à–∏–±–∫–∞: product_id –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å > 1000.
        # GET /products/1001 ‚Üí –£—Å–ø–µ—Ö: {"product_id": 1001}.

    # –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å Query –∏ Path –≤–º–µ—Å—Ç–µ
    @app.get("/users/{user_id}/orders")
    async def get_orders(
        user_id: int = Path(..., title="User ID"),
        limit: int = Query(10, gt=0),  # Query-–ø–∞—Ä–∞–º–µ—Ç—Ä
        active_only: bool = Query(True)  # –ï—â—ë –æ–¥–∏–Ω query-–ø–∞—Ä–∞–º–µ—Ç—Ä
    ):
        return {"user_id": user_id, "limit": limit, "active_only": active_only}

        # –ó–∞–ø—Ä–æ—Å: GET /users/42/orders?limit=5&active_only=false.
        # –û—Ç–≤–µ—Ç: {"user_id": 42, "limit": 5, "active_only": false}.

    # UUID –≤–º–µ—Å—Ç–æ —á–∏—Å–µ–ª
    from uuid import UUID

    @app.get("/files/{file_id}")
    async def read_file(file_id: UUID = Path(...)):  # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è UUID
        return {"file_id": file_id}

    # –ó–∞–ø—Ä–æ—Å: GET /files/123e4567-e89b-12d3-a456-426614174000 ‚Üí –£—Å–ø–µ—Ö.
    # –ó–∞–ø—Ä–æ—Å: GET /files/123 ‚Üí –û—à–∏–±–∫–∞: –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–π UUID.

–ö–ª–∞—Å—Å Path –≤ FastAPI –Ω—É–∂–µ–Ω –¥–ª—è:
- –ò–∑–≤–ª–µ—á–µ–Ω–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∏–∑ –ø—É—Ç–∏ URL.
- –í–∞–ª–∏–¥–∞—Ü–∏–∏ –∑–Ω–∞—á–µ–Ω–∏–π (—á–∏—Å–ª–∞, —Å—Ç—Ä–æ–∫–∏, UUID).
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏—è API (–æ–ø–∏—Å–∞–Ω–∏—è, –ø—Ä–∏–º–µ—Ä—ã).
- –ì–∏–±–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–∞–ª–∏–∞—Å—ã, deprecated-—Ñ–ª–∞–≥–∏).

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –µ–≥–æ –¥–ª—è –≤—Å–µ—Ö –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –ø—É—Ç–∏, —á—Ç–æ–±—ã –∫–æ–¥ –±—ã–ª –Ω–∞–¥—ë–∂–Ω—ã–º –∏ —Å–∞–º–æ–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É–µ–º—ã–º! 
#####


–ö–ª–∞—Å—Å status –≤ FastAPI (–∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –∏–∑ fastapi.status) –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç HTTP-–∫–æ–¥—ã —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ –≤–∏–¥–µ —É–¥–æ–±–Ω—ã—Ö –∫–æ–Ω—Å—Ç–∞–Ω—Ç. 
–≠—Ç–æ –¥–µ–ª–∞–µ—Ç –∫–æ–¥ —á–∏—â–µ, –∏–∑–±–µ–≥–∞—è "–º–∞–≥–∏—á–µ—Å–∫–∏—Ö —á–∏—Å–µ–ª" –∏ —Å–Ω–∏–∂–∞—è —Ä–∏—Å–∫ –æ—à–∏–±–æ–∫.
–ó–∞—á–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å status –≤–º–µ—Å—Ç–æ "—Å—ã—Ä—ã—Ö" —á–∏—Å–µ–ª?
    - –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å ‚Äì status.HTTP_200_OK –ø–æ–Ω—è—Ç–Ω–µ–µ, —á–µ–º –ø—Ä–æ—Å—Ç–æ 200.
    - –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ ‚Äì IDE –ø–æ–¥—Å–∫–∞–∂–µ—Ç –≤–æ–∑–º–æ–∂–Ω—ã–µ –∫–æ–¥—ã (–º–µ–Ω—å—à–µ —à–∞–Ω—Å–æ–≤ –æ—à–∏–±–∏—Ç—å—Å—è).
    - –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å ‚Äì –≥–∞—Ä–∞–Ω—Ç–∏—è, —á—Ç–æ –∫–æ–¥ –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–µ—Ç 999).

–û—Å–Ω–æ–≤–Ω—ã–µ HTTP-–∫–æ–¥—ã –∏–∑ status:
# –£—Å–ø–µ—à–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
status.HTTP_200_OK  # 200 (OK)
status.HTTP_201_CREATED  # 201 (–°–æ–∑–¥–∞–Ω–æ)
status.HTTP_204_NO_CONTENT  # 204 (–ù–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ)

# –û—à–∏–±–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞
status.HTTP_400_BAD_REQUEST  # 400 (–ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å)
status.HTTP_401_UNAUTHORIZED  # 401 (–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω)
status.HTTP_403_FORBIDDEN  # 403 (–ó–∞–ø—Ä–µ—â–µ–Ω–æ)
status.HTTP_404_NOT_FOUND  # 404 (–ù–µ –Ω–∞–π–¥–µ–Ω–æ)

# –û—à–∏–±–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞
status.HTTP_500_INTERNAL_SERVER_ERROR  # 500 (–í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –æ—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞)

–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:
1. –£–∫–∞–∑–∞–Ω–∏–µ –∫–æ–¥–∞ –æ—Ç–≤–µ—Ç–∞ –≤ —ç–Ω–¥–ø–æ–∏–Ω—Ç–µ:
    from fastapi import FastAPI, status

    app = FastAPI()

    @app.post("/items/", status_code=status.HTTP_201_CREATED)
    async def create_item():
        return {"message": "Item created"}
    
    # –ü—Ä–∏ —É—Å–ø–µ—à–Ω–æ–º –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ –≤–µ—Ä–Ω—ë—Ç—Å—è –∫–æ–¥ 201.

2. –í–æ–∑–≤—Ä–∞—Ç –æ—à–∏–±–∫–∏ —Å –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º —Å—Ç–∞—Ç—É—Å–æ–º:
    from fastapi import FastAPI, status, HTTPException

    app = FastAPI()

    @app.get("/items/{id}")
    async def read_item(id: int):
        if id == 0:
            raise HTTPException(
                status_code=status.HTTP_404_NOT_FOUND,
                detail="Item not found"
            )
        return {"id": id}

    # –ï—Å–ª–∏ id=0, –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏—Ç 404.

3. –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Å—Ç–∞—Ç—É—Å—ã –¥–ª—è —Ä–µ–¥–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤:
    from fastapi import FastAPI, status, HTTPException

    app = FastAPI()

    @app.post("/payment/")
    async def process_payment():
        # –ù–∞–ø—Ä–∏–º–µ—Ä, 402 (–¢—Ä–µ–±—É–µ—Ç—Å—è –æ–ø–ª–∞—Ç–∞) –¥–ª—è –ø–ª–∞—Ç–Ω–æ–≥–æ API
        return {"detail": "Payment required"}, status.HTTP_402_PAYMENT_REQUIRED

–ö–ª–∞—Å—Å —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–µ HTTP-—Å—Ç–∞—Ç—É—Å—ã –∏–∑ RFC (–≤–∫–ª—é—á–∞—è —Ä–µ–¥–∫–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä):
    HTTP_418_IM_A_TEAPOT (418 –Ø ‚Äî —á–∞–π–Ω–∏–∫)
    HTTP_451_UNAVAILABLE_FOR_LEGAL_REASONS (451 –ù–µ–¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ —é—Ä–∏–¥–∏—á–µ—Å–∫–∏–º –ø—Ä–∏—á–∏–Ω–∞–º)


fastapi.status ‚Äì —ç—Ç–æ –∫–æ–ª–ª–µ–∫—Ü–∏—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã—Ö HTTP-–∫–æ–¥–æ–≤ –≤ –≤–∏–¥–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç.
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:
- status_code –≤ –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞—Ö (@app.get).
- HTTPException(status_code=...).
- –†—É—á–Ω–æ–≥–æ –≤–æ–∑–≤—Ä–∞—Ç–∞ —Å—Ç–∞—Ç—É—Å–æ–≤ (return Response(status_code=...)).
–ü–ª—é—Å—ã: —á–∏—Ç–∞–µ–º–æ—Å—Ç—å, –Ω–∞–¥—ë–∂–Ω–æ—Å—Ç—å, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä—è–º–æ –≤ –∫–æ–¥–µ.

–ü—Ä–∏–º–µ—Ä:
    from fastapi import FastAPI, status, HTTPException

    app = FastAPI()

    @app.get("/admin/", status_code=status.HTTP_200_OK)
    async def admin_panel():
        if not is_admin:
            raise HTTPException(
                status_code=status.HTTP_403_FORBIDDEN,
                detail="Admins only!"
            )
        return {"message": "Welcome, admin!"}

#####


–ö–ª–∞—Å—Å Body –≤ FastAPI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏, –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–º–∏ –≤ —Ç–µ–ª–µ HTTP-–∑–∞–ø—Ä–æ—Å–∞ (–æ–±—ã—á–Ω–æ –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON). 
–û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç:
    - –ò–∑–≤–ª–µ–∫–∞—Ç—å –∏ –≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞.
    - –£–∫–∞–∑—ã–≤–∞—Ç—å –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ/–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è.
    - –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å API (–¥–æ–±–∞–≤–ª—è—Ç—å –æ–ø–∏—Å–∞–Ω–∏—è, –ø—Ä–∏–º–µ—Ä—ã).
    - –ì–∏–±–∫–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –ø–æ–≤–µ–¥–µ–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –≤–ª–æ–∂–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã, –ø–æ–ª—è —Å –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º–∏ –∏–º–µ–Ω–∞–º–∏).

–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ Body:
1. –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞
    # –ø–æ–ª—É—á–µ–Ω–∏–µ JSON-–æ–±—ä–µ–∫—Ç–∞ –≤ POST-–∑–∞–ø—Ä–æ—Å–µ.
    from fastapi import FastAPI, Body

    app = FastAPI()

    @app.post("/items/")
    async def create_item(item: dict = Body(...)):  # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Ç–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞
        return {"item": item}

    # –ó–∞–ø—Ä–æ—Å: curl -X POST http://localhost:8000/items/ -H "Content-Type: application/json" -d '{"name": "Book", "price": 100}'
    # –û—Ç–≤–µ—Ç: {"item": {"name": "Book", "price": 100}}

2. –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö. Body –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç —Ç–µ –∂–µ –ø—Ä–∞–≤–∏–ª–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏, —á—Ç–æ –∏ Pydantic:
    - min_length, max_length (–¥–ª—è —Å—Ç—Ä–æ–∫).
    - gt, lt (–¥–ª—è —á–∏—Å–µ–ª).
    - –†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è (regex).

    # –ü—Ä–∏–º–µ—Ä —Å –≤–∞–ª–∏–¥–∞—Ü–∏–µ–π:
    from fastapi import FastAPI, Body
    from pydantic import BaseModel

    app = FastAPI()

    class Item(BaseModel):
        name: str
        price: float = Body(..., gt=0)  # –¶–µ–Ω–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å > 0

    @app.post("/items/")
    async def create_item(item: Item):
        return item

    # –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞—Ç—å {"name": "Book", "price": -10}, FastAPI –≤–µ—Ä–Ω—ë—Ç –æ—à–∏–±–∫—É 422.

3. –†–∞–±–æ—Ç–∞ —Å –≤–ª–æ–∂–µ–Ω–Ω—ã–º–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏.
    # Body –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–ª–æ–∂–Ω—ã–µ JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã.
    from fastapi import FastAPI, Body

    app = FastAPI()

    @app.post("/orders/")
    async def create_order(
        order: dict = Body(..., example={
            "user_id": 1,
            "items": [{"id": 1, "quantity": 2}]
        })
    ):
        return order

    # –í Swagger –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è –ø—Ä–∏–º–µ—Ä —Ç–µ–ª–∞ –∑–∞–ø—Ä–æ—Å–∞.

4. –ù–µ—Å–∫–æ–ª—å–∫–æ —Ç–µ–ª –∑–∞–ø—Ä–æ—Å–∞.
    # –ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø—Ä–∏–Ω—è—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ JSON-–æ–±—ä–µ–∫—Ç–æ–≤ –≤ –æ–¥–Ω–æ–º –∑–∞–ø—Ä–æ—Å–µ:
    from fastapi import FastAPI, Body

    app = FastAPI()

    @app.post("/merge/")
    async def merge_data(
        user: dict = Body(...),
        item: dict = Body(...)
    ):
        return {"user": user, "item": item}

    # –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞: {"user": {"name": "John"}, "item": {"title": "Laptop"}}

5. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API.
    # –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ–ø–∏—Å–∞–Ω–∏–π –∏ –ø—Ä–∏–º–µ—Ä–æ–≤
    from fastapi import FastAPI, Body

    app = FastAPI()

    app.post("/users/")
    async def create_user(
        user: dict = Body(
            ...,
            title="User Data",
            description="–°–æ–¥–µ—Ä–∂–∏—Ç –∏–º—è –∏ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è",
            example={"name": "Alice", "email": "alice@example.com"}
        )
    ):
        return user

    # –í Swagger/Redoc –ø–æ—è–≤–∏—Ç—Å—è –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è.

–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Body:
- POST/PUT/PATCH-–∑–∞–ø—Ä–æ—Å—ã ‚Äî –∫–æ–≥–¥–∞ –¥–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ–¥–∞—é—Ç—Å—è –≤ —Ç–µ–ª–µ (–Ω–µ –≤ URL).
- –°–ª–æ–∂–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã ‚Äî –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã, –º–∞—Å—Å–∏–≤—ã.
- –í–∞–ª–∏–¥–∞—Ü–∏—è ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –æ–±—Ä–∞–±–æ—Ç–∫–æ–π.
- –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ OpenAPI-—Å—Ö–µ–º—ã.

–û—Ç–ª–∏—á–∏—è Body –æ—Ç Query –∏ Path
–ü–∞—Ä–∞–º–µ—Ç—Ä	–ì–¥–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è	        –ü—Ä–∏–º–µ—Ä
Body	    –¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞ (JSON/XML)	    { "name": "Book" }
Query	    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã URL (?name=Book)	/items?name=Book
Path	    –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –ø—É—Ç–∏ (/items/1)	/items/1

–í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã:
–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: Body(...) ‚Äî –ø–æ–ª–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ, Body(None) ‚Äî –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ.
Content-Type: –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –æ–∂–∏–¥–∞–µ—Ç—Å—è application/json.
–ê–ª–∏–∞—Å—ã: –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–∏–º–µ–Ω–æ–≤—ã–≤–∞—Ç—å –ø–æ–ª—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å –¥—Ä—É–≥–∏–º–∏ API): item_name: str = Body(..., alias="itemName")
#####


–ö–ª–∞—Å—Å HTTPException –≤ FastAPI ‚Äî —ç—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≤–æ–∑–≤—Ä–∞—Ç–∞ HTTP-–æ—à–∏–±–æ–∫ –∫–ª–∏–µ–Ω—Ç—É —Å —É–¥–æ–±–Ω—ã–º —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º. 
–û–Ω –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø—Ä–µ—Ä–≤–∞—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–∞ –∏ —Å—Ä–∞–∑—É –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—É —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ —Å –Ω—É–∂–Ω—ã–º —Å—Ç–∞—Ç—É—Å-–∫–æ–¥–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, 404 Not Found –∏–ª–∏ 403 Forbidden).

–ó–∞—á–µ–º –Ω—É–∂–µ–Ω HTTPException:
- –ì–∏–±–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—à–∏–±–∫–∞–º–∏ ‚Äî –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø—Ä–µ—Ä–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å –∏ –≤–µ—Ä–Ω—É—Ç—å –∫–ª–∏–µ–Ω—Ç—É –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ.
- –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–æ–≤ ‚Äî –≤—Å–µ –æ—à–∏–±–∫–∏ –±—É–¥—É—Ç –≤ –æ–¥–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ (—Å –∫–æ–¥–æ–º —Å—Ç–∞—Ç—É—Å–∞ –∏ –¥–µ—Ç–∞–ª—è–º–∏).
- –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å OpenAPI ‚Äî –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä—É—é—Ç—Å—è –≤ Swagger/Redoc.

1. –ü—Ä–æ—Å—Ç–æ–π –≤—ã–∑–æ–≤ –æ—à–∏–±–∫–∏.
    from fastapi import FastAPI, HTTPException

    app = FastAPI()

    @app.get("/items/{item_id}")
    async def read_item(item_id: int):
        if item_id == 0:
            raise HTTPException(status_code=404, detail="Item not found")
        return {"item_id": item_id}

    # –ï—Å–ª–∏ –ø–µ—Ä–µ–¥–∞–Ω item_id=0, –∫–ª–∏–µ–Ω—Ç –ø–æ–ª—É—á–∏—Ç:
    # json {"detail": "Item not found"} —Å HTTP-—Å—Ç–∞—Ç—É—Å–æ–º 404.

2. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è.
    # –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª—é–±—ã–µ JSON-–¥–∞–Ω–Ω—ã–µ –≤ –æ—Ç–≤–µ—Ç
    from fastapi import FastAPI, HTTPException

    app = FastAPI()

    @app.get("/items/{item_id}")
    async def read_item(item_id: int):
        if item_id == 0:
            raise HTTPException(
                status_code=400,
                detail="Invalid input",
                headers={"X-Error": "Missing data"},
                extra={"field": "price", "expected_type": "float"}
            )
        return {"item_id": item_id}

    # –û—Ç–≤–µ—Ç: json {"detail": "Invalid input", "field": "price", "expected_type": "float"}

3. –ö–∞—Å—Ç–æ–º–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
    from fastapi import FastAPI, HTTPException

    app = FastAPI()

    @app.get("/items/{item_id}")
    async def read_item(item_id: int):
        if item_id == 0:
            raise HTTPException(
                status_code=403,
                detail="Access denied",
                headers={"WWW-Authenticate": "Bearer"}
            )
        return {"item_id": item_id}

    # –ü–æ–ª–µ–∑–Ω–æ –¥–ª—è –æ—à–∏–±–æ–∫ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, OAuth2).

–ü—Ä–∏–º–µ—Ä—ã —á–∞—Å—Ç—ã—Ö –æ—à–∏–±–æ–∫ –∏ –∏—Ö –∫–æ–¥–æ–≤:
–ö–æ–¥	–¢–∏–ø –æ—à–∏–±–∫–∏	        –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
400	–ù–µ–≤–µ—Ä–Ω—ã–π –∑–∞–ø—Ä–æ—Å	    –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ—Ç –∫–ª–∏–µ–Ω—Ç–∞.
401	–ù–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω	    –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–∏–ª —Ç–æ–∫–µ–Ω.
403	–î–æ—Å—Ç—É–ø –∑–∞–ø—Ä–µ—â—ë–Ω	    –ù–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –¥–µ–π—Å—Ç–≤–∏—è.
404	–ù–µ –Ω–∞–π–¥–µ–Ω–æ	        –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã–π —Ä–µ—Å—É—Ä—Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç.
422	–û—à–∏–±–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏	–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ–∑–Ω–∏–∫–∞–µ—Ç –ø—Ä–∏ –Ω–µ–≤–µ—Ä–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
500	–û—à–∏–±–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞	    –î–ª—è –Ω–µ–ø—Ä–µ–¥–≤–∏–¥–µ–Ω–Ω—ã—Ö —Å–±–æ–µ–≤.

–ü—Ä–∏–º–µ—Ä—ã –∏–∑ —Ä–µ–∞–ª—å–Ω–æ–π –ø—Ä–∞–∫—Ç–∏–∫–∏
1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

async def check_admin(user_role: str):
    if user_role != "admin":
        raise HTTPException(
            status_code=403,
            detail="Only admins can perform this action"
        )

@app.delete("/users/{user_id}")
async def delete_user(user_id: int, current_user: str = Depends(get_current_user)):
    await check_admin(current_user.role)
    # ...—É–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –¥–∞–Ω–Ω—ã—Ö

@app.get("/products/{product_id}")
async def get_product(product_id: int, db: Session = Depends(get_db)):
    product = db.get(Product, product_id)
    if not product:
        raise HTTPException(status_code=404, detail="Product not found")
    return product

3. –ö–∞—Å—Ç–æ–º–Ω–∞—è –æ—à–∏–±–∫–∞ –¥–ª—è –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏

@app.post("/payment/")
async def process_payment(amount: float):
    if amount <= 0:
        raise HTTPException(
            status_code=400,
            detail="Amount must be positive",
            headers={"X-Reason": "Invalid amount"}
        )
    # ...–æ–±—Ä–∞–±–æ—Ç–∫–∞ –ø–ª–∞—Ç–µ–∂–∞

–ö–∞–∫ HTTPException –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ—Ç—Å—è —Å FastAPI:
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –≤ JSON-–æ—Ç–≤–µ—Ç.
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Äî –æ—à–∏–±–∫–∏ –ø–æ–ø–∞–¥–∞—é—Ç –≤ –ª–æ–≥ —Å–µ—Ä–≤–µ—Ä–∞.
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è ‚Äî –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è OpenAPI/Swagger.

–í–∞–∂–Ω—ã–µ –Ω—é–∞–Ω—Å—ã
–û—Ç–ª–∏—á–∏–µ –æ—Ç status
    status —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –∫–æ–¥–æ–≤ (–Ω–∞–ø—Ä–∏–º–µ—Ä, status.HTTP_404_NOT_FOUND).
    HTTPException ‚Äî —ç—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—à–∏–±–æ–∫.

–ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∞ –∫–æ–≥–¥–∞ –Ω–µ—Ç?
    –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: –¥–ª—è –æ–∂–∏–¥–∞–µ–º—ã—Ö –æ—à–∏–±–æ–∫ (–Ω–µ—Ç –ø—Ä–∞–≤, –Ω–µ –Ω–∞–π–¥–µ–Ω–æ).
    –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å: –¥–ª—è –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å–±–æ–µ–≤ —Å–µ—Ä–≤–µ—Ä–∞ (–ª—É—á—à–µ –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –∏ –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å 500).

–ì–ª–æ–±–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞
    –ú–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–≤–∞—Ç—ã–≤–∞—Ç—å –≤—Å–µ HTTPException —á–µ—Ä–µ–∑ –∫–∞—Å—Ç–æ–º–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏.

üìå –ò—Ç–æ–≥
–ö–ª–∞—Å—Å HTTPException –≤ FastAPI –Ω—É–∂–µ–Ω –¥–ª—è:
‚úÖ –ì–∏–±–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ HTTP-–æ—à–∏–±–æ–∫.
‚úÖ –í–æ–∑–≤—Ä–∞—Ç–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –∫–ª–∏–µ–Ω—Ç—É.
‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å OpenAPI (–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ—à–∏–±–æ–∫).

–ë–µ–∑ –Ω–µ–≥–æ –ø—Ä–∏—à–ª–æ—Å—å –±—ã –≤—Ä—É—á–Ω—É—é —Å–æ–∑–¥–∞–≤–∞—Ç—å JSONResponse —Å –æ—à–∏–±–∫–∞–º–∏, —á—Ç–æ —É—Å–ª–æ–∂–Ω–∏–ª–æ –±—ã –∫–æ–¥.

–ü—Ä–∏–º–µ—Ä ¬´–∫–∞–∫ –Ω–µ –Ω–∞–¥–æ¬ª (–±–µ–∑ HTTPException):
python

from fastapi.responses import JSONResponse

@app.get("/items/{item_id}")
async def read_item(item_id: int):
    if item_id == 0:
        return JSONResponse(
            status_code=404,
            content={"message": "Item not found"}
        )
    return {"item_id": item_id}

–ü—Ä–∏–º–µ—Ä ¬´–∫–∞–∫ –Ω–∞–¥–æ¬ª (—Å HTTPException):
python

@app.get("/items/{item_id}")
async def read_item(item_id: int):
    if item_id == 0:
        raise HTTPException(status_code=404, detail="Item not found")
    return {"item_id": item_id}

–ö–æ–¥ —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —á–∏—â–µ, –∞ –æ—à–∏–±–∫–∏ ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏! 